<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link rel="preload" href="img/background.png" as="image">
  <style>html{background-color:#d9eefa;}</style><title>צנצנת אדיבות</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/></head>
<body>
  <header>
  <a href="https://www.blueskiescenter.com" class="logo-link"><img src="img/logo.png" alt="לוגו" /></a>
  <h1>צנצנת אדיבות</h1>
  <a class="header-btn" href="https://www.blueskiescenter.com">דף הבית</a>
</header>
  <main>
    <div class="game-container">
      <div class="instructions">
        <p>גררו לבבות לצנצנת כדי למלא אותה במעשים טובים. כל לב מייצג מעשה אדיב שאתם יכולים לעשות.</p>
      </div>
      <div id="jar" class="jar-area"></div>
      <div id="hearts" class="hearts-container"></div>
      <p id="jarMessage" style="text-align:center;font-weight:bold;margin-top:20px;"></p>
      <a href="activities.html" class="back-link">חזרה לתפריט פעילויות</a>
    </div>
  </main>
  <script>
    const jar = document.getElementById('jar');
    const heartsContainer = document.getElementById('hearts');
    const messageEl = document.getElementById('jarMessage');
    const heartsCount = 5;
    // positions inside the jar where collected hearts will be placed
    const positions = [
      { top: 200, left: 60 },
      { top: 240, left: 120 },
      { top: 180, left: 150 },
      { top: 220, left: 90 },
      { top: 260, left: 180 }
    ];
    // Examples of good deeds to display when a heart is added
    const acts = [
      'לעזור לחבר ללמוד',
      'לכתוב מכתב תודה למישהו',
      'לחייך לאדם זר',
      'לעזור להורים בבית',
      'לשתף משחק עם חבר'
    ];
    let collected = 0;
    function initHearts() {
      for (let i = 0; i < heartsCount; i++) {
        const heart = document.createElement('div');
        heart.className = 'heart';
        // store original position for reset
        heart.dataset.origIndex = i;
        heartsContainer.appendChild(heart);
        heart.addEventListener('mousedown', startDrag);
        heart.addEventListener('touchstart', startDrag);
      }
    }
    function startDrag(e) {
      e.preventDefault();
      const heart = e.currentTarget;
      if (heart.classList.contains('collected')) return;
      const rect = heart.getBoundingClientRect();
      const offsetX = e.touches ? e.touches[0].clientX - rect.left : e.clientX - rect.left;
      const offsetY = e.touches ? e.touches[0].clientY - rect.top : e.clientY - rect.top;
      function onMove(ev) {
        const clientX = ev.touches ? ev.touches[0].clientX : ev.clientX;
        const clientY = ev.touches ? ev.touches[0].clientY : ev.clientY;
        const bodyRect = document.body.getBoundingClientRect();
        heart.style.position = 'absolute';
        heart.style.zIndex = '1000';
        heart.style.left = (clientX - offsetX) + 'px';
        heart.style.top = (clientY - offsetY) + 'px';
      }
      function onEnd(ev) {
        document.removeEventListener('mousemove', onMove);
        document.removeEventListener('touchmove', onMove);
        document.removeEventListener('mouseup', onEnd);
        document.removeEventListener('touchend', onEnd);
        const heartRect = heart.getBoundingClientRect();
        const jarRect = jar.getBoundingClientRect();
        if (heartRect.right > jarRect.left && heartRect.left < jarRect.right &&
            heartRect.bottom > jarRect.top && heartRect.top < jarRect.bottom) {
          collectHeart(heart);
        } else {
          // reset to container
          heart.style.position = '';
          heart.style.left = '';
          heart.style.top = '';
          heart.style.zIndex = '';
        }
      }
      document.addEventListener('mousemove', onMove);
      document.addEventListener('touchmove', onMove);
      document.addEventListener('mouseup', onEnd);
      document.addEventListener('touchend', onEnd);
    }
    function collectHeart(heart) {
      // mark as collected
      heart.classList.add('collected');
      // append to jar and position inside jar
      jar.appendChild(heart);
      const pos = positions[collected];
      heart.style.position = 'absolute';
      heart.style.left = pos.left + 'px';
      heart.style.top = pos.top + 'px';
      heart.style.zIndex = '1';
      collected++;
      // show a random act suggestion
      const act = acts[Math.floor(Math.random() * acts.length)];
      messageEl.textContent = 'מעשה טוב: ' + act;
      if (collected === heartsCount) {
        messageEl.textContent = 'הצנצנת מלאה! כל הכבוד על המעשים הטובים!';
      }
    }
    initHearts();
  </script>
</body>
</html>