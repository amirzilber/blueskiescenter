<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link rel="preload" href="img/background.png" as="image">
  <style>html{background-color:#d9eefa;}</style><title>ספירת נשימות</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/></head>
<body>
  <header>
  <a href="https://www.blueskiescenter.com" class="logo-link"><img src="img/logo.png" alt="לוגו" /></a>
  <h1>ספירת נשימות</h1>
  <a class="header-btn" href="https://www.blueskiescenter.com">דף הבית</a>
</header>
  <main>
    <div class="game-container">
      <div class="instructions">
        <p>שבו בנוחות ובחרו כמה נשימות ברצף תרצו לספור. לאחר כל מחזור נשימה לחצו על הבועה המסומנת ברצף והתקדמו עד המספר שבחרתם. אם איבדתם ריכוז – התחילו מחדש.</p>
      </div>
      <div style="text-align:center;margin-bottom:15px;">
        <label for="maxSelect">עד כמה תרצו לספור?</label>
        <select id="maxSelect">
          <option value="5">5</option>
          <option value="10" selected>10</option>
        </select>
      </div>
      <div id="bubbles" class="count-bubbles"></div>
      <p id="message" style="text-align:center;font-weight:bold;"></p>
      <a href="breathing.html" class="back-link">חזרה לעמוד נשימות</a>
    </div>
  </main>
  <script>
    const bubblesContainer = document.getElementById('bubbles');
    const message = document.getElementById('message');
    const maxSelect = document.getElementById('maxSelect');
    let maxCount = parseInt(maxSelect.value, 10);
    let current = 1;

    function renderBubbles() {
      bubblesContainer.innerHTML = '';
      for (let i = 1; i <= maxCount; i++) {
        const bubble = document.createElement('div');
        bubble.className = 'bubble';
        bubble.textContent = i;
        if (i === current) bubble.classList.add('active');
        bubble.addEventListener('click', () => handleClick(i));
        bubblesContainer.appendChild(bubble);
      }
    }
    function handleClick(i) {
      if (i !== current) {
        current = 1;
        message.textContent = 'ניסיון מחדש!';
      } else {
        if (current === maxCount) {
          message.textContent = 'כל הכבוד! השלמתם ' + maxCount + ' נשימות.';
          current = 1;
        } else {
          current++;
          message.textContent = '';
        }
      }
      renderBubbles();
    }
    // update maxCount when selection changes
    maxSelect.addEventListener('change', () => {
      maxCount = parseInt(maxSelect.value, 10);
      current = 1;
      message.textContent = '';
      renderBubbles();
    });
    renderBubbles();
  </script>
</body>
</html>